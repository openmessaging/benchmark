[
  {
    "name": "full-encrypt",
    "pluginClass": "io.conduktor.gateway.interceptor.EncryptPlugin",
    "priority": 100,
    "config": {
      "topic": "full-encrypt.*",
      "kmsConfig": {
        "aws": {
          "basicCredentials": {
            "accessKey": "{{ lookup('ansible.builtin.env', 'ENCRYPT_ACCESS_KEY') }}",
            "secretKey": "{{ lookup('ansible.builtin.env', 'ENCRYPT_SECRET_KEY') }}"
          }
        }
      },
      "recordValue": {
        "payload": {
          "keySecretId": "aws-kms://{{ tf_kms_arn }}",
          "algorithm": "AES128_GCM"
        }
      }
    }
  },
  {
    "name": "full-decrypt",
    "pluginClass": "io.conduktor.gateway.interceptor.DecryptPlugin",
    "priority": 100,
    "config": {
      "topic": "full-encrypt.*",
      "kmsConfig": {
        "aws": {
          "basicCredentials": {
            "accessKey": "{{ lookup('ansible.builtin.env', 'ENCRYPT_ACCESS_KEY') }}",
            "secretKey": "{{ lookup('ansible.builtin.env', 'ENCRYPT_SECRET_KEY') }}"
          }
        }
      }
    }
  }
]
